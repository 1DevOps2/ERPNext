name: deploy erp app

on:
  push:
    branches: [ "erpnext-with-github-actions" ]

jobs:
  deploy-erp:
    runs-on: ubuntu-latest

    steps:
    - name: update system
      run: |
        sudo apt-get update
        sudo apt-get upgrade -y

    - name: install git
      run: |
        sudo apt-get install git -y

    - name: install docker & docker-compose
      run: |
        sudo apt-get install docker.io docker-compose -y 

    - name: clone the project
      run: |
        sudo git clone -b erpnext-with-github-actions https://github.com/1DevOps2/ERPNext.git 

    - name: run the docker containers
      run: |
        cd ERPNext
        sudo docker-compose up --build -d

    - name: check running 
      run: sudo docker ps


            

